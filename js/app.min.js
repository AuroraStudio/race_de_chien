let allBreeds=[],filteredBreeds=[],compareList=[];function breedSlug(e){return e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")}function breedUrl(e){return`/races/${breedSlug(e.name_fr||e.name)}`}const translations={size:{toy:{label:"Tr√®s petite",desc:"Moins de 28 cm",icon:"üêï"},small:{label:"Petite",desc:"28 - 40 cm",icon:"üêï"},medium:{label:"Moyenne",desc:"40 - 60 cm",icon:"üêï"},large:{label:"Grande",desc:"60 - 70 cm",icon:"üêï"},giant:{label:"G√©ante",desc:"Plus de 70 cm",icon:"üêï"}},energy:{low:{label:"Calme",color:"green"},moderate:{label:"Mod√©r√©",color:"yellow"},high:{label:"√ânergique",color:"orange"},very_high:{label:"Tr√®s √©nergique",color:"red"}},coatLength:{"Sans poil":"Sans poil",Court:"Court",Moyen:"Moyen",Long:"Long"},shedding:{Minimal:"Minimal","L√©ger":"L√©ger","Mod√©r√©":"Mod√©r√©",Abondant:"Abondant"},experience:{"D√©butant":{label:"D√©butant",color:"green"},"Interm√©diaire":{label:"Interm√©diaire",color:"yellow"},"Confirm√©":{label:"Confirm√©",color:"orange"},Expert:{label:"Expert",color:"red"}}},traitTranslations={Confident:"Confiant",Friendly:"Amical et sociable",Alert:"Vigilant et attentif",Intelligent:"Intelligent et vif",Courageous:"Courageux et brave",Loyal:"Loyal et fid√®le",Brave:"Intr√©pide",Playful:"Joueur et enjou√©",Active:"Actif et dynamique",Gentle:"Doux et tendre",Affectionate:"Affectueux et c√¢lin",Protective:"Protecteur et gardien",Cheerful:"Joyeux et optimiste",Quiet:"Calme et pos√©",Energetic:"√ânergique et sportif",Trainable:"Facile √† √©duquer",Independent:"Ind√©pendant et autonome",Stubborn:"T√™tu et volontaire",Curious:"Curieux et explorateur",Obedient:"Ob√©issant et docile",Fearless:"Sans peur et audacieux",Devoted:"D√©vou√© √† sa famille",Responsive:"R√©ceptif √† l'√©ducation","Self-confidence":"S√ªr de lui",Spirited:"Enjou√© et plein de vie","Good-natured":"De bonne nature",Keen:"Vif et alerte",Trusting:"Confiant envers les humains",Kind:"Gentil et bienveillant","Sweet-Tempered":"Au temp√©rament doux",Tenacious:"Tenace et pers√©v√©rant",Attentive:"Attentif et √† l'√©coute",Faithful:"Fid√®le en toutes circonstances",Bold:"Audacieux et d√©termin√©",Proud:"Fier et digne",Reliable:"Fiable et stable",Watchful:"Surveillant et m√©fiant","Even Tempered":"D'humeur √©gale",Reserved:"R√©serv√© avec les √©trangers",Sensitive:"Sensible et r√©actif",Adaptable:"Adaptable √† tous les environnements",Outgoing:"Extraverti et sociable",Charming:"Charmant et attachant",Docile:"Docile et ob√©issant",Patient:"Patient avec les enfants",Steady:"Stable et √©quilibr√©",Determined:"D√©termin√© et focus",Hardworking:"Travailleur et assidu",Dignified:"Digne et majestueux",Composed:"Pos√© et calme",Joyful:"Joyeux et heureux",Agile:"Agile et rapide",Excitable:"Excitable et r√©actif",Dominant:"Dominant et leader",Strong:"Fort et puissant",Powerful:"Puissant et muscl√©",Suspicious:"M√©fiant avec les inconnus",Vocal:"Vocal et expressif",Adventurous:"Aventureux et explorateur",Happy:"Heureux et satisfait",Noisy:"Bruyant et aboyeur",Companionable:"Excellent compagnon",Lively:"Vivant et plein d'entrain",Clever:"Malin et rus√©",Assertive:"Assur√© et confiant",Feisty:"Piquant et combatif",Wild:"Sauvage et primitif",Hardy:"Robuste et r√©sistant",Cooperative:"Coop√©ratif et collaboratif",Lovable:"Adorable et attachant",Bright:"Brillant et intelligent",Quick:"Rapide et vif",Refined:"Raffin√© et √©l√©gant",Willful:"Volontaire et d√©termin√©",Instinctual:"Guid√© par l'instinct",Inquisitive:"Curieux et investigateur",Rational:"Rationnel et logique",Fast:"Rapide et v√©loce",Merry:"Jovial et enjou√©",Bossy:"Autoritaire et dirigeant",Clownish:"Bouffon et comique",Loving:"Aimant et d√©monstratif",Familial:"Attach√© √† la famille","Great-hearted":"Au grand c≈ìur",Opinionated:"Opini√¢tre et affirm√©",Unflappable:"Imperturbable","People-Oriented":"Centr√© sur l'humain",Athletic:"Athl√©tique et sportif",Boisterous:"Tapageur et turbulent",Generous:"G√©n√©reux et donnant"};async function loadBreeds(){try{const e=await fetch("/data/breeds.json"),t=await e.json();allBreeds=t.breeds,filteredBreeds=[...allBreeds],updateCount(allBreeds.length)}catch(e){console.error("Erreur:",e),document.getElementById("breeds-container").innerHTML='\n            <div class="col-span-full text-center py-20">\n                <div class="text-6xl mb-4">üòï</div>\n                <h3 class="text-xl font-bold text-slate-700 mb-2">Erreur de chargement</h3>\n                <p class="text-slate-500">Impossible de charger les donn√©es des races</p>\n            </div>\n        '}}function setupFilters(){document.querySelectorAll("input[data-filter]").forEach(e=>{e.addEventListener("change",()=>{applyFilters(),updateActiveFilters()})}),["filter-children","filter-apartment","filter-dogs","filter-cats","filter-protective"].forEach(e=>{document.getElementById(e)?.addEventListener("change",()=>{applyFilters(),updateActiveFilters()})}),document.querySelectorAll('input[data-filter="trait"]').forEach(e=>{e.addEventListener("change",()=>{applyFilters(),updateActiveFilters()})}),document.getElementById("filter-search")?.addEventListener("input",debounce(e=>{applyFilters(),updateAutocomplete(e.target.value)},300)),document.getElementById("sort-by")?.addEventListener("change",()=>{sortBreeds(),displayBreeds(filteredBreeds)}),document.getElementById("reset-filters")?.addEventListener("click",resetFilters)}function setupSliders(){const e=document.getElementById("weight-min"),t=document.getElementById("weight-max");e&&t&&(e.addEventListener("input",e=>{const n=parseInt(e.target.value);n>parseInt(t.value)&&(t.value=n,document.getElementById("weight-max-display").textContent=n+" kg"),document.getElementById("weight-min-display").textContent=n+" kg",applyFilters(),updateActiveFilters()}),t.addEventListener("input",t=>{const n=parseInt(t.target.value);n<parseInt(e.value)&&(e.value=n,document.getElementById("weight-min-display").textContent=n+" kg"),document.getElementById("weight-max-display").textContent=n+" kg",applyFilters(),updateActiveFilters()}));const n=document.getElementById("life-min"),a=document.getElementById("life-max");n&&a&&(n.addEventListener("input",e=>{const t=parseInt(e.target.value);t>parseInt(a.value)&&(a.value=t,document.getElementById("life-max-display").textContent=t+" ans"),document.getElementById("life-min-display").textContent=t+" ans",applyFilters(),updateActiveFilters()}),a.addEventListener("input",e=>{const t=parseInt(e.target.value);t<parseInt(n.value)&&(n.value=t,document.getElementById("life-min-display").textContent=t+" ans"),document.getElementById("life-max-display").textContent=t+" ans",applyFilters(),updateActiveFilters()}));const l=document.getElementById("exercise-min"),r=document.getElementById("exercise-max");l&&r&&(l.addEventListener("input",e=>{const t=parseInt(e.target.value);t>parseInt(r.value)&&(r.value=t,document.getElementById("exercise-max-display").textContent=t+" min"),document.getElementById("exercise-min-display").textContent=t+" min",applyFilters(),updateActiveFilters()}),r.addEventListener("input",e=>{const t=parseInt(e.target.value);t<parseInt(l.value)&&(l.value=t,document.getElementById("exercise-min-display").textContent=t+" min"),document.getElementById("exercise-max-display").textContent=t+" min",applyFilters(),updateActiveFilters()}))}function setupAutocomplete(){const e=document.getElementById("filter-search"),t=document.getElementById("search-autocomplete");e&&t&&document.addEventListener("click",n=>{e.contains(n.target)||t.contains(n.target)||t.classList.add("hidden")})}function setupMobileSidebar(){const e=document.getElementById("sidebar-filters"),t=document.getElementById("sidebar-backdrop"),n=document.getElementById("mobile-filter-btn"),a=document.getElementById("sidebar-close-btn");function l(){e.classList.add("max-lg:-translate-x-full"),e.classList.remove("max-lg:translate-x-0"),t?.classList.add("hidden"),document.body.style.overflow="",setTimeout(()=>{window.innerWidth<1024&&e.classList.add("hidden")},300)}e&&n&&(n.addEventListener("click",()=>{e.classList.contains("hidden")?(e.classList.remove("hidden"),e.classList.remove("max-lg:-translate-x-full"),e.classList.add("max-lg:translate-x-0"),t?.classList.remove("hidden"),document.body.style.overflow="hidden"):l()}),a?.addEventListener("click",l),t?.addEventListener("click",l),document.addEventListener("keydown",t=>{"Escape"===t.key&&!e.classList.contains("hidden")&&window.innerWidth<1024&&l()}),window.addEventListener("resize",()=>{window.innerWidth>=1024&&(e.classList.remove("hidden","max-lg:-translate-x-full","max-lg:translate-x-0"),t?.classList.add("hidden"),document.body.style.overflow="")}))}function updateMobileFilterCount(){const e=document.getElementById("mobile-filter-count");if(!e)return;let t=0;t+=document.querySelectorAll("input[data-filter]:checked").length,["filter-children","filter-apartment","filter-dogs","filter-cats","filter-protective"].forEach(e=>{document.getElementById(e)?.checked&&t++}),t>0?(e.textContent=t,e.classList.remove("hidden")):e.classList.add("hidden")}function updateAutocomplete(e){const t=document.getElementById("search-autocomplete");if(!t)return;if(!e||e.length<2)return void t.classList.add("hidden");const n=allBreeds.filter(t=>t.name.toLowerCase().includes(e.toLowerCase())).slice(0,5);0!==n.length?(t.innerHTML=n.map(e=>`\n        <div class="autocomplete-item px-4 py-3 cursor-pointer flex items-center gap-3 border-b border-slate-100 last:border-0"\n             onclick="selectBreed('${e.id}')">\n            <img src="${e.image?.url||""}" alt="" class="w-10 h-10 rounded-lg object-cover bg-slate-200">\n            <div>\n                <div class="font-medium text-slate-900">${e.name}</div>\n                <div class="text-xs text-slate-500">${e.origin||"Origine inconnue"}</div>\n            </div>\n        </div>\n    `).join(""),t.classList.remove("hidden")):t.classList.add("hidden")}function selectBreed(e){window.location.href=breedUrl(allBreeds.find(t=>t.id===e)||{name:e})}function applyFilters(){const e=Array.from(document.querySelectorAll('input[data-filter="size"]:checked')).map(e=>e.value),t=Array.from(document.querySelectorAll('input[data-filter="energy"]:checked')).map(e=>e.value),n=Array.from(document.querySelectorAll('input[data-filter="coat"]:checked')).map(e=>e.value),a=Array.from(document.querySelectorAll('input[data-filter="shedding"]:checked')).map(e=>e.value),l=Array.from(document.querySelectorAll('input[data-filter="experience"]:checked')).map(e=>e.value),r=Array.from(document.querySelectorAll('input[data-filter="trait"]:checked')).map(e=>e.value),i=Array.from(document.querySelectorAll('input[data-filter="group"]:checked')).map(e=>e.value),s=document.getElementById("filter-children")?.checked||!1,d=document.getElementById("filter-apartment")?.checked||!1,o=document.getElementById("filter-dogs")?.checked||!1,c=document.getElementById("filter-cats")?.checked||!1,u=document.getElementById("filter-protective")?.checked||!1,m=document.getElementById("filter-search")?.value.toLowerCase().trim()||"",p=parseInt(document.getElementById("weight-min")?.value||1),g=parseInt(document.getElementById("weight-max")?.value||100),f=parseInt(document.getElementById("life-min")?.value||6),y=parseInt(document.getElementById("life-max")?.value||20),h=parseInt(document.getElementById("exercise-min")?.value||0),v=parseInt(document.getElementById("exercise-max")?.value||180);filteredBreeds=allBreeds.filter(x=>{if(e.length>0&&!e.includes(x.physical?.size_category))return!1;if(t.length>0&&!t.includes(x.temperament?.energy_level))return!1;if(n.length>0&&!n.includes(x.coat?.length))return!1;if(a.length>0&&!a.includes(x.coat?.shedding))return!1;if(l.length>0&&!l.includes(x.training?.experience_required))return!1;if(i.length>0&&!i.includes(x.breed_group))return!1;if(s&&!0!==x.temperament?.good_with_children)return!1;if(d&&!0!==x.living?.apartment_friendly)return!1;if(o&&!0!==x.temperament?.good_with_dogs)return!1;if(c&&!0!==x.temperament?.good_with_cats)return!1;if(u&&!0!==x.temperament?.protective)return!1;if(m&&!x.name.toLowerCase().includes(m))return!1;if(r.length>0){const e=x.temperament?.traits||[];if(!r.every(t=>e.includes(t)))return!1}const b=x.physical?.weight_kg?.average||x.physical?.weight_kg?.max||20;if(b<p||b>g)return!1;const B=x.physical?.life_span_years?.average||x.physical?.life_span_years?.max||12;if(B<f||B>y)return!1;const E=x.living?.exercise_needs?.daily_minutes||60;return!(E<h||E>v)}),sortBreeds(),displayBreeds(filteredBreeds),updateCount(filteredBreeds.length)}function updateActiveFilters(){const e=document.getElementById("active-filters");if(!e)return;const t=[];document.querySelectorAll('input[data-filter="size"]:checked').forEach(e=>{const n=translations.size[e.value];t.push({type:"size",value:e.value,label:n?.label||e.value})}),document.querySelectorAll('input[data-filter="energy"]:checked').forEach(e=>{const n=translations.energy[e.value];t.push({type:"energy",value:e.value,label:n?.label||e.value})}),document.querySelectorAll('input[data-filter="coat"]:checked').forEach(e=>{t.push({type:"coat",value:e.value,label:e.value})}),document.querySelectorAll('input[data-filter="shedding"]:checked').forEach(e=>{t.push({type:"shedding",value:e.value,label:e.value})}),document.querySelectorAll('input[data-filter="experience"]:checked').forEach(e=>{const n=translations.experience[e.value];t.push({type:"experience",value:e.value,label:n?.label||e.value})}),document.querySelectorAll('input[data-filter="trait"]:checked').forEach(e=>{t.push({type:"trait",value:e.value,label:e.value})}),document.querySelectorAll('input[data-filter="group"]:checked').forEach(e=>{t.push({type:"group",value:e.value,label:e.value})}),document.getElementById("filter-children")?.checked&&t.push({type:"toggle",id:"filter-children",label:"Compatible enfants"}),document.getElementById("filter-apartment")?.checked&&t.push({type:"toggle",id:"filter-apartment",label:"Adapt√© appartement"}),document.getElementById("filter-dogs")?.checked&&t.push({type:"toggle",id:"filter-dogs",label:"Compatible chiens"}),document.getElementById("filter-cats")?.checked&&t.push({type:"toggle",id:"filter-cats",label:"Compatible chats"}),document.getElementById("filter-protective")?.checked&&t.push({type:"toggle",id:"filter-protective",label:"Chien de garde"});const n=document.getElementById("weight-min")?.value,a=document.getElementById("weight-max")?.value;(n>1||a<100)&&t.push({type:"slider",label:`Poids: ${n}-${a} kg`});const l=document.getElementById("life-min")?.value,r=document.getElementById("life-max")?.value;(l>6||r<20)&&t.push({type:"slider",label:`Dur√©e de vie: ${l}-${r} ans`});const i=document.getElementById("exercise-min")?.value,s=document.getElementById("exercise-max")?.value;if((i>0||s<180)&&t.push({type:"slider",label:`Exercice: ${i}-${s} min/j`}),0===t.length)return e.classList.add("hidden"),void updateMobileFilterCount();e.classList.remove("hidden"),e.innerHTML=t.map(e=>`\n        <span class="filter-chip inline-flex items-center gap-2 px-3 py-1.5 bg-primary-50 text-primary-700 rounded-full text-sm font-medium border border-primary-200">\n            ${e.label}\n            <button onclick="removeFilter('${e.type}', '${e.value||e.id||""}')" \n                    class="hover:bg-primary-200 rounded-full p-0.5 transition-colors">\n                <i class="fas fa-times text-xs"></i>\n            </button>\n        </span>\n    `).join(""),updateMobileFilterCount()}function removeFilter(e,t){if("size"===e||"energy"===e||"coat"===e||"shedding"===e||"experience"===e||"trait"===e||"group"===e){const n=document.querySelector(`input[data-filter="${e}"][value="${t}"]`);n&&(n.checked=!1)}else if("toggle"===e){const e=document.getElementById(t);e&&(e.checked=!1)}applyFilters(),updateActiveFilters()}function sortBreeds(){const e=document.getElementById("sort-by")?.value||"name";filteredBreeds.sort((t,n)=>{switch(e){case"name":return t.name.localeCompare(n.name);case"size":const e={toy:1,small:2,medium:3,large:4,giant:5};return(e[t.physical?.size_category]||3)-(e[n.physical?.size_category]||3);case"weight":return(t.physical?.weight_kg?.average||t.physical?.weight_kg?.max||20)-(n.physical?.weight_kg?.average||n.physical?.weight_kg?.max||20);case"life":const a=t.physical?.life_span_years?.average||t.physical?.life_span_years?.max||12;return(n.physical?.life_span_years?.average||n.physical?.life_span_years?.max||12)-a;case"energy":const l={low:1,moderate:2,high:3,very_high:4};return(l[t.temperament?.energy_level]||2)-(l[n.temperament?.energy_level]||2);default:return 0}})}function resetFilters(){document.querySelectorAll('input[type="checkbox"]').forEach(e=>e.checked=!1);const e=document.getElementById("weight-min"),t=document.getElementById("weight-max");e&&(e.value=1,document.getElementById("weight-min-display").textContent="1 kg"),t&&(t.value=100,document.getElementById("weight-max-display").textContent="100 kg");const n=document.getElementById("life-min"),a=document.getElementById("life-max");n&&(n.value=6,document.getElementById("life-min-display").textContent="6 ans"),a&&(a.value=20,document.getElementById("life-max-display").textContent="20 ans");const l=document.getElementById("exercise-min"),r=document.getElementById("exercise-max");l&&(l.value=0,document.getElementById("exercise-min-display").textContent="0 min"),r&&(r.value=180,document.getElementById("exercise-max-display").textContent="180 min");const i=document.getElementById("filter-search");i&&(i.value="");const s=document.getElementById("sort-by");s&&(s.value="name"),filteredBreeds=[...allBreeds],sortBreeds(),displayBreeds(filteredBreeds),updateCount(filteredBreeds.length),updateActiveFilters()}function displayBreeds(e){const t=document.getElementById("breeds-container");t&&(0!==e.length?t.innerHTML=e.map((e,t)=>createBreedCard(e,t)).join(""):t.innerHTML='\n            <div class="col-span-full text-center py-20">\n                <div class="text-6xl mb-4">üîç</div>\n                <h3 class="text-xl font-bold text-slate-700 mb-2">Aucune race trouv√©e</h3>\n                <p class="text-slate-500">Essayez d\'ajuster vos crit√®res de recherche</p>\n            </div>\n        ')}function createBreedCard(e,t){const n=e.image?.url||"",a=e.physical?.size_category||"medium",l=e.temperament?.energy_level||"moderate",r=(translations.size[a],translations.energy[l]||{label:"Mod√©r√©",color:"yellow"}),i=(e.temperament?.traits||[]).slice(0,3).map(e=>traitTranslations[e.trim()]||e.trim()),s=50*t,d=e.training?.experience_required,o=d?translations.experience[d]:null;return`\n        <div class="card-hover bg-white rounded-2xl overflow-hidden shadow-sm border border-slate-100 block animate-fade-in relative group"\n             style="animation-delay: ${s}ms">\n            \x3c!-- Compare Checkbox --\x3e\n            <label class="absolute top-3 left-3 z-10 cursor-pointer">\n                <input type="checkbox" class="compare-checkbox hidden" \n                       ${compareList.includes(e.id)?"checked":""} \n                       onchange="toggleCompare('${e.id}', this)">\n                <div class="w-8 h-8 bg-white/90 backdrop-blur-sm rounded-full border-2 border-slate-200 flex items-center justify-center text-slate-400 hover:border-primary-400 transition-all">\n                    <i class="fas fa-check text-xs"></i>\n                </div>\n            </label>\n            \n            <a href="${breedUrl(e)}" class="block">\n                <div class="relative h-52 overflow-hidden bg-gradient-to-br from-slate-100 to-slate-200">\n                    ${n?`<picture><source srcset="${n.replace(".jpg",".webp")}" type="image/webp"><img src="${n}" alt="${e.name}" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500" loading="lazy" width="400" height="300"></picture>`:'<div class="w-full h-full flex items-center justify-center text-6xl">üêï</div>'}\n                    <div class="absolute top-3 right-3 flex flex-col gap-2">\n                        ${o?`\n                            <span class="px-2 py-0.5 bg-${o.color}-100 text-${o.color}-700 rounded-full text-[10px] font-medium">\n                                ${o.label}\n                            </span>\n                        `:""}\n                    </div>\n                </div>\n                <div class="p-5">\n                    <h3 class="text-lg font-bold text-slate-900 mb-1">${e.name}</h3>\n                    <p class="text-sm text-slate-500 mb-3 flex items-center gap-1">\n                        <i class="fas fa-map-marker-alt text-primary-400"></i>\n                        ${e.origin||"Origine inconnue"}\n                    </p>\n                    \n                    <div class="flex flex-wrap gap-2 mb-3">\n                        <span class="px-2.5 py-1 rounded-lg text-xs font-medium border ${{green:"bg-green-100 text-green-700 border-green-200",yellow:"bg-yellow-100 text-yellow-700 border-yellow-200",orange:"bg-orange-100 text-orange-700 border-orange-200",red:"bg-red-100 text-red-700 border-red-200"}[r.color]}">\n                            ${r.label}\n                        </span>\n                        ${e.temperament?.good_with_children?'<span class="px-2.5 py-1 rounded-lg text-xs font-medium bg-green-50 text-green-600 border border-green-100">\n                                <i class="fas fa-child mr-1"></i>Enfants OK\n                            </span>':""}\n                        ${e.living?.apartment_friendly?'<span class="px-2.5 py-1 rounded-lg text-xs font-medium bg-blue-50 text-blue-600 border border-blue-100">\n                                <i class="fas fa-building mr-1"></i>Appartement\n                            </span>':""}\n                        ${e.temperament?.good_with_dogs?'<span class="px-2.5 py-1 rounded-lg text-xs font-medium bg-orange-50 text-orange-600 border border-orange-100">\n                                <i class="fas fa-dog mr-1"></i>Chiens OK\n                            </span>':""}\n                        ${e.temperament?.good_with_cats?'<span class="px-2.5 py-1 rounded-lg text-xs font-medium bg-purple-50 text-purple-600 border border-purple-100">\n                                <i class="fas fa-cat mr-1"></i>Chats OK\n                            </span>':""}\n                        ${e.temperament?.protective?'<span class="px-2.5 py-1 rounded-lg text-xs font-medium bg-red-50 text-red-600 border border-red-100">\n                                <i class="fas fa-shield-alt mr-1"></i>Gardien\n                            </span>':""}\n                    </div>\n                    <div class="flex flex-wrap gap-1.5">\n                        ${i.map(e=>`<span class="px-2 py-0.5 bg-slate-100 text-slate-600 rounded text-xs">${e}</span>`).join("")}\n                    </div>\n                </div>\n            </a>\n        </div>\n    `}function setupComparison(){const e=document.getElementById("view-comparison"),t=document.getElementById("clear-comparison");e?.addEventListener("click",()=>{compareList.length<2?alert("S√©lectionnez au moins 2 races √† comparer"):window.location.href=`/compare?ids=${compareList.join(",")}`}),t?.addEventListener("click",()=>{compareList=[],updateComparisonBar(),displayBreeds(filteredBreeds)})}function toggleCompare(e,t){if(t.checked){if(compareList.length>=3)return alert("Vous pouvez comparer maximum 3 races"),void(t.checked=!1);compareList.push(e)}else compareList=compareList.filter(t=>t!==e);updateComparisonBar()}function updateComparisonBar(){const e=document.getElementById("comparison-bar"),t=document.getElementById("compare-count"),n=document.getElementById("compare-thumbnails");if(e&&t){if(t.textContent=compareList.length,0===compareList.length)return e.classList.add("translate-y-full"),void document.getElementById("mobile-filter-btn")?.classList.remove("hidden");e.classList.remove("translate-y-full"),window.innerWidth<1024&&document.getElementById("mobile-filter-btn")?.classList.add("hidden"),n&&(n.innerHTML=compareList.map(e=>{const t=allBreeds.find(t=>t.id===e);return t?`\n                <img src="${t.image?.url||""}" alt="${t.name}" \n                     class="w-8 h-8 rounded-full border-2 border-white object-cover bg-slate-200"\n                     title="${t.name}">\n            `:""}).join(""))}}function updateCount(e){const t=document.getElementById("breed-count");t&&(t.textContent=e)}function debounce(e,t){let n;return function(...a){clearTimeout(n),n=setTimeout(()=>{clearTimeout(n),e(...a)},t)}}document.addEventListener("DOMContentLoaded",async()=>{await loadBreeds(),setupFilters(),setupSliders(),setupAutocomplete(),setupComparison(),setupMobileSidebar(),displayBreeds(allBreeds)});